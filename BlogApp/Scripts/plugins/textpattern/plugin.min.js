tinymce.PluginManager.add("textpattern",function(n){function r(){return t&&(i.sort(function(n,t){return n.start.length>t.start.length?-1:n.start.length<t.start.length?1:0}),t=!1),i}function u(n){for(var i=r(),t=0;t<i.length;t++)if(n.indexOf(i[t].start)===0&&(!i[t].end||n.lastIndexOf(i[t].end)==n.length-i[t].end.length))return i[t]}function e(n,t,i){for(var u,e=r(),f=0;f<e.length;f++)if(u=e[f],u.end&&n.substr(t-u.end.length-i,u.end.length)==u.end)return u}function f(t){function p(){i=i.splitText(f);i.splitText(o-f-s);i.deleteData(0,r.start.length);i.deleteData(i.data.length-r.end.length,r.end.length)}var c,y,l,i,o,f,a,h,r,s,v;if(c=n.selection,y=n.dom,c.isCollapsed())return(l=c.getRng(!0),i=l.startContainer,o=l.startOffset,a=i.data,s=t?1:0,i.nodeType!=3)?void 0:(r=e(a,o,s),!r)?void 0:(f=Math.max(0,o-s),f=a.lastIndexOf(r.start,f-r.end.length-1),f===-1)?void 0:(h=y.createRng(),h.setStart(i,f),h.setEnd(i,o-s),r=u(h.toString()),!r||!r.end)?void 0:i.data.length<=r.start.length+r.end.length?void 0:(v=n.formatter.get(r.format),v&&v[0].inline?(p(),n.formatter.apply(r.format,{},i),i):void 0)}function o(){var f,l,s,i,h,c,e,t,a,r,o;if((f=n.selection,l=n.dom,f.isCollapsed())&&(e=l.getParent(f.getStart(),"p"),e)){for(a=new tinymce.dom.TreeWalker(e,e);h=a.next();)if(h.nodeType==3){i=h;break}if(i){if(t=u(i.data),!t)return;if(r=f.getRng(!0),s=r.startContainer,o=r.startOffset,i==s&&(o=Math.max(0,o-t.start.length)),tinymce.trim(i.data).length==t.start.length)return;t.format&&(c=n.formatter.get(t.format),c&&c[0].block&&(i.deleteData(0,t.start.length),n.formatter.apply(t.format,{},i),r.setStart(s,o),r.collapse(!0),f.setRng(r)));t.cmd&&n.undoManager.transact(function(){i.deleteData(0,t.start.length);n.execCommand(t.cmd)})}}}function s(){var i,t;t=f();t&&(i=n.dom.createRng(),i.setStart(t,t.data.length),i.setEnd(t,t.data.length),n.selection.setRng(i));o()}function h(){var t,e,i,r,u;t=f(!0);t&&(u=n.dom,e=t.data.slice(-1),/[\u00a0 ]/.test(e)&&(t.deleteData(t.data.length-1,1),i=u.doc.createTextNode(e),t.nextSibling?u.insertAfter(i,t.nextSibling):t.parentNode.appendChild(i),r=u.createRng(),r.setStart(i,1),r.setEnd(i,1),n.selection.setRng(r)))}var t=!0,i=n.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}];n.on("keydown",function(n){n.keyCode!=13||tinymce.util.VK.modifierPressed(n)||s()},!0);n.on("keyup",function(n){n.keyCode!=32||tinymce.util.VK.modifierPressed(n)||h()});this.getPatterns=r;this.setPatterns=function(n){i=n;t=!0}});
/*
//# sourceMappingURL=plugin.min.js.map
*/
(function(n,t){"use strict";function u(n,t){for(var u,e=[],i=0;i<n.length;++i){if(u=r[n[i]]||f(n[i]),!u)throw"module definition dependecy not found: "+n[i];e.push(u)}t.apply(null,e)}function i(n,i,f){if(typeof n!="string")throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(i,function(){r[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}var r={};i("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(n,i){function u(n,t){return parseInt(n.getAttribute(t)||1,10)}var r=n.each;return function(f,e){function d(){var n=0;o=[];w=0;r(["thead","tbody","tfoot"],function(t){var i=s.select("> "+t+" tr",e);r(i,function(i,f){f+=n;r(s.select("> td, > th",i),function(n,i){var e,r,s,h;if(o[f])while(o[f][i])i++;for(s=u(n,"rowspan"),h=u(n,"colspan"),r=f;r<f+s;r++)for(o[r]||(o[r]=[]),e=i;e<i+h;e++)o[r][e]={part:t,real:r==f&&e==i,elm:n,rowspan:s,colspan:h};w=Math.max(w,i+1)})});n+=i.length})}function g(n,t){return n=n.cloneNode(t),n.removeAttribute("id"),n}function k(n,t){var i;return i=o[t],i?i[n]:void 0}function c(n,t,i){n&&(i=parseInt(i,10),i===1?n.removeAttribute(t,1):n.setAttribute(t,i,1))}function b(n){return n&&(s.hasClass(n.elm,"mce-item-selected")||n==y)}function nt(){var n=[];return r(e.rows,function(t){r(t.cells,function(i){if(s.hasClass(i,"mce-item-selected")||y&&i==y.elm)return n.push(t),!1})}),n}function ut(){var n=s.createRng();n.setStartAfter(e);n.setEndAfter(e);a.setRng(n);s.remove(e)}function p(t){var u,e={};return f.settings.table_clone_elements!==!1&&(e=n.makeMap((f.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),n.walk(t,function(n){var f;if(n.nodeType==3)return r(s.getParents(n.parentNode,null,t).reverse(),function(n){e[n.nodeName]&&(n=g(n,!1),u?f&&f.appendChild(n):u=f=n,f=n)}),f&&(f.innerHTML=i.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),t=g(t,!1),c(t,"rowSpan",1),c(t,"colSpan",1),u?t.appendChild(u):(!i.ie||i.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function tt(){var t=s.createRng(),n;if(r(s.select("tr",e),function(n){n.cells.length===0&&s.remove(n)}),s.select("tr",e).length===0){t.setStartBefore(e);t.setEndBefore(e);a.setRng(t);s.remove(e);return}r(s.select("thead,tbody,tfoot",e),function(n){n.rows.length===0&&s.remove(n)});d();h&&(n=o[Math.min(o.length-1,h.y)],n&&(a.select(n[Math.min(n.length-1,h.x)].elm,!0),a.collapse(!0)))}function it(n,t,i,r){for(var e,f,c,u=o[t][n].elm.parentNode,h=1;h<=i;h++)if(u=s.getNext(u,"tr"),u){for(e=n;e>=0;e--)if(c=o[t+h][e].elm,c.parentNode==u){for(f=1;f<=r;f++)s.insertAfter(p(c),c);break}if(e==-1)for(f=1;f<=r;f++)u.insertBefore(p(u.cells[0]),u.cells[0])}}function rt(){r(o,function(n,t){r(n,function(n,i){var r,f,e;if(b(n)&&(n=n.elm,r=u(n,"colspan"),f=u(n,"rowspan"),r>1||f>1)){for(c(n,"rowSpan",1),c(n,"colSpan",1),e=0;e<r-1;e++)s.insertAfter(p(n),n);it(i,t,f-1,r)}})})}function ft(t,i,u){var it,e,a,w,g,nt,y,f,ut,p,ft;if(t?(it=v(t),e=it.x,a=it.y,w=e+(i-1),g=a+(u-1)):(h=l=null,r(o,function(n,t){r(n,function(n,i){b(n)&&(h||(h={x:i,y:t}),l={x:i,y:t})})}),h&&(e=h.x,a=h.y,w=l.x,g=l.y)),f=k(e,a),ut=k(w,g),f&&ut&&f.part==ut.part){for(rt(),d(),f=k(e,a).elm,c(f,"colSpan",w-e+1),c(f,"rowSpan",g-a+1),y=a;y<=g;y++)for(nt=e;nt<=w;nt++)o[y]&&o[y][nt]&&(t=o[y][nt].elm,t!=f&&(p=n.grep(t.childNodes),r(p,function(n){f.appendChild(n)}),p.length&&(p=n.grep(f.childNodes),ft=0,r(p,function(n){n.nodeName=="BR"&&s.getAttrib(n,"data-mce-bogus")&&ft++<p.length-1&&f.removeChild(n)})),s.remove(t)));tt()}}function et(n){var i,f,w,e,l,a,v,y,h;if(r(o,function(t,u){return r(t,function(t){if(b(t)&&(t=t.elm,l=t.parentNode,a=g(l,!1),i=u,n))return!1}),n?!i:void 0}),i!==t){for(e=0;e<o[0].length;e++)if(o[i][e]&&(f=o[i][e].elm,f!=w)){if(n){if(i>0&&o[i-1][e]&&(y=o[i-1][e].elm,h=u(y,"rowSpan"),h>1)){c(y,"rowSpan",h+1);continue}}else if(h=u(f,"rowspan"),h>1){c(f,"rowSpan",h+1);continue}v=p(f);c(v,"colSpan",f.colSpan);a.appendChild(v);w=f}a.hasChildNodes()&&(n?l.parentNode.insertBefore(a,l):s.insertAfter(a,l))}}function ot(n){var t,i;r(o,function(i){return r(i,function(i,r){if(b(i)&&(t=r,n))return!1}),n?!t:void 0});r(o,function(r,f){var e,h,o;r[t]&&(e=r[t].elm,e!=i&&(o=u(e,"colspan"),h=u(e,"rowspan"),o==1?n?(e.parentNode.insertBefore(p(e),e),it(t,f,h-1,o)):(s.insertAfter(p(e),e),it(t,f,h-1,o)):c(e,"colSpan",e.colSpan+1),i=e))})}function st(){var t=[];r(o,function(i){r(i,function(i,f){b(i)&&n.inArray(t,f)===-1&&(r(o,function(n){var t=n[f].elm,i;i=u(t,"colSpan");i>1?c(t,"colSpan",i-1):s.remove(t)}),t.push(f))})});tt()}function ht(){function t(n){var t,i;r(n.cells,function(n){var i=u(n,"rowSpan");i>1&&(c(n,"rowSpan",i-1),t=v(n),it(t.x,t.y,1,1))});t=v(n.cells[0]);r(o[t.y],function(n){var t;n=n.elm;n!=i&&(t=u(n,"rowSpan"),t<=1?s.remove(n):c(n,"rowSpan",t-1),i=n)})}var n;n=nt();r(n.reverse(),function(n){t(n)});tt()}function ct(){var n=nt();return s.remove(n),tt(),n}function lt(){var n=nt();return r(n,function(t,i){n[i]=g(t,!0)}),n}function at(n,t){var f=nt(),i=f[t?0:f.length-1],u=i.cells.length;n&&(r(o,function(n){var t;return u=0,r(n,function(n){n.real&&(u+=n.colspan);n.elm.parentNode==i&&(t=1)}),t?!1:void 0}),t||n.reverse(),r(n,function(n){for(var f=n.cells.length,e,r=0;r<f;r++)e=n.cells[r],c(e,"colSpan",1),c(e,"rowSpan",1);for(r=f;r<u;r++)n.appendChild(p(n.cells[f-1]));for(r=u;r<f;r++)s.remove(n.cells[r]);t?i.parentNode.insertBefore(n,i):s.insertAfter(n,i)}),s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function v(n){var t;return r(o,function(i,u){return r(i,function(i,r){if(i.elm==n)return t={x:r,y:u},!1}),!t}),t}function vt(n){h=v(n)}function yt(){var n,t;return n=t=0,r(o,function(i,u){r(i,function(i,r){var f,e;b(i)&&(i=o[u][r],r>n&&(n=r),u>t&&(t=u),i.real&&(f=i.colspan-1,e=i.rowspan-1,f&&r+f>n&&(n=r+f),e&&u+e>t&&(t=u+e)))})}),{x:n,y:t}}function pt(n){var r,u,y,p,f,e,c,a,t,i;if(l=v(n),h&&l){for(r=Math.min(h.x,l.x),u=Math.min(h.y,l.y),y=Math.max(h.x,l.x),p=Math.max(h.y,l.y),f=y,e=p,i=u;i<=e;i++)n=o[i][r],n.real||r-(n.colspan-1)<r&&(r-=n.colspan-1);for(t=r;t<=f;t++)n=o[u][t],n.real||u-(n.rowspan-1)<u&&(u-=n.rowspan-1);for(i=u;i<=p;i++)for(t=r;t<=y;t++)n=o[i][t],n.real&&(c=n.colspan-1,a=n.rowspan-1,c&&t+c>f&&(f=t+c),a&&i+a>e&&(e=i+a));for(s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),i=u;i<=e;i++)for(t=r;t<=f;t++)o[i][t]&&s.addClass(o[i][t].elm,"mce-item-selected")}}function wt(n,t){var u,r,i;u=v(n);r=u.y*w+u.x;do{if(r+=t,i=k(r%w,Math.floor(r/w)),!i)break;if(i.elm!=n)return a.select(i.elm,!0),s.isEmpty(i.elm)&&a.collapse(!0),!0}while(i.elm==n);return!1}var o,w,h,l,y,a=f.selection,s=a.dom;e=e||s.getParent(a.getStart(),"table");d();y=s.getParent(a.getStart(),"th,td");y&&(h=v(y),l=yt(),y=k(h.x,h.y));n.extend(this,{deleteTable:ut,split:rt,merge:ft,insertRow:et,insertCol:ot,deleteCols:st,deleteRows:ht,cutRows:ct,copyRows:lt,pasteRows:at,getPos:v,setStartCell:vt,setEndCell:pt,moveRelIdx:wt,refresh:d})}});i("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(n,t,i){function r(n,t){return parseInt(n.getAttribute(t)||1,10)}var u=i.each;return function(i){function o(){function t(t){function h(n,r){var e=n?"previousSibling":"nextSibling",u=i.dom.getParent(r,"tr"),o=u[e],f;if(o)return c(i,r,o,n),t.preventDefault(),!0;var s=i.dom.getParent(u,"table"),h=u.parentNode,a=h.nodeName.toLowerCase();return(a==="tbody"||a===(n?"tfoot":"thead"))&&(f=l(n,s,h,"tbody"),f!==null)?v(n,f,r):y(n,u,e,s)}function l(n,t,r,u){var f=i.dom.select(">"+u,t),e=f.indexOf(r),o;return n&&e===0||!n&&e===f.length-1?a(n,t):e===-1?(o=r.tagName.toLowerCase()==="thead"?0:f.length-1,f[o]):f[e+(n?-1:1)]}function a(n,t){var u=n?"thead":"tfoot",r=i.dom.select(">"+u,t);return r.length!==0?r[0]:null}function v(n,r,u){var f=e(r,n);return f&&c(i,u,f,n),t.preventDefault(),!0}function y(n,r,u,f){var c=f[u],s,l;return c?(o(c),!0):(s=i.dom.getParent(f,"td,th"),s?h(n,s,t):(l=e(r,!n),o(l),t.preventDefault(),!1))}function e(n,t){var r=n&&n[t?"lastChild":"firstChild"];return r&&r.nodeName==="BR"?i.dom.getParent(r,"td,th"):r}function o(n){i.selection.setCursorLocation(n,0)}function p(){return f==n.UP||f==n.DOWN}function w(n){var t=n.selection.getNode(),i=n.dom.getParent(t,"tr");return i!==null}function b(n){for(var i=0,t=n;t.previousSibling;)t=t.previousSibling,i=i+r(t,"colspan");return i}function k(n,t){var i=0,f=0;return u(n.children,function(n,u){return i=i+r(n,"colspan"),f=u,i>t?!1:void 0}),f}function c(n,t,r,u){var s=b(i.dom.getParent(t,"td,th")),h=k(r,s),f=r.childNodes[h],c=e(f,u);o(c||f)}function d(n){var u=i.selection.getNode(),t=i.dom.getParent(u,"td,th"),r=i.dom.getParent(n,"td,th");return t&&t!==r&&g(t,r)}function g(n,t){return i.dom.getParent(n,"TABLE")===i.dom.getParent(t,"TABLE")}var f=t.keyCode,s;p()&&w(i)&&(s=i.selection.getNode(),setTimeout(function(){d(s)&&h(!t.shiftKey&&f===n.UP,s,t)},0))}i.on("KeyDown",function(n){t(n)})}function f(){function n(n,t){var u=t.ownerDocument,i=u.createRange(),r;return i.setStartBefore(t),i.setEnd(n.endContainer,n.endOffset),r=u.createElement("body"),r.appendChild(i.cloneContents()),r.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length===0}i.on("KeyDown",function(t){var r,u,f=i.dom;(t.keyCode==37||t.keyCode==38)&&(r=i.selection.getRng(),u=f.getParent(r.startContainer,"table"),u&&i.getBody().firstChild==u&&n(r,u)&&(r=f.createRng(),r.setStartBefore(u),r.setEndBefore(u),i.selection.setRng(r),t.preventDefault()))})}function e(){i.on("KeyDown SetContent VisualAid",function(){for(var n=i.getBody().lastChild;n;n=n.previousSibling)if(n.nodeType==3){if(n.nodeValue.length>0)break}else if(n.nodeType==1&&(n.tagName=="BR"||!n.getAttribute("data-mce-bogus")))break;n&&n.nodeName=="TABLE"&&(i.settings.forced_root_block?i.dom.add(i.getBody(),i.settings.forced_root_block,i.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):i.dom.add(i.getBody(),"br",{"data-mce-bogus":"1"}))});i.on("PreProcess",function(n){var t=n.node.lastChild;t&&(t.nodeName=="BR"||t.childNodes.length==1&&(t.firstChild.nodeName=="BR"||t.firstChild.nodeValue==" "))&&t.previousSibling&&t.previousSibling.nodeName=="TABLE"&&i.dom.remove(t)})}function s(){function t(n,t,i,r){var u=n.dom.getParent(t.startContainer,"TABLE"),f,e,o;return u&&(f=u.parentNode),e=t.startContainer.nodeType==3&&t.startOffset===0&&t.endOffset===0&&r&&(i.nodeName=="TR"||i==f),o=(i.nodeName=="TD"||i.nodeName=="TH")&&!r,e||o}function n(){var r=i.selection.getRng(),f=i.selection.getNode(),u=i.dom.getParent(r.startContainer,"TD,TH"),n;if(t(i,r,f,u)){for(u||(u=f),n=u.lastChild;n.lastChild;)n=n.lastChild;n.nodeType==3&&(r.setEnd(n,n.data.length),i.selection.setRng(r))}}i.on("KeyDown",function(){n()});i.on("MouseDown",function(t){t.button!=2&&n()})}function h(){i.on("keydown",function(t){var r,u,f;if((t.keyCode==n.DELETE||t.keyCode==n.BACKSPACE)&&!t.isDefaultPrevented()&&(r=i.dom.getParent(i.selection.getStart(),"table"),r)){for(u=i.dom.select("td,th",r),f=u.length;f--;)if(!i.dom.hasClass(u[f],"mce-item-selected"))return;t.preventDefault();i.execCommand("mceTableDelete")}})}h();t.webkit&&(o(),s());t.gecko&&(f(),e());t.ie>10&&(f(),e())}});i("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(n,t,i){return function(r){function c(n){r.getBody().style.webkitUserSelect="";(n||h)&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),h=!1)}function l(t){var c,l,i=t.target;if(!s&&e&&(f||i!=e)&&(i.nodeName=="TD"||i.nodeName=="TH")){l=u.getParent(i,"table");l==o&&(f||(f=new n(r,l),f.setStartCell(e),r.getBody().style.webkitUserSelect="none"),f.setEndCell(i),h=!0);c=r.selection.getSel();try{c.removeAllRanges?c.removeAllRanges():c.empty()}catch(a){}t.preventDefault()}}var u=r.dom,f,e,o,h=!0,s;r.on("MouseDown",function(n){n.button==2||s||(c(),e=u.getParent(n.target,"td,th"),o=u.getParent(e,"table"))});r.on("mouseover",l);r.on("remove",function(){u.unbind(r.getDoc(),"mouseover",l)});r.on("MouseUp",function(){function a(n,r){var u=new t(n,n);do{if(n.nodeType==3&&i.trim(n.nodeValue).length!==0){r?s.setStart(n,0):s.setEnd(n,n.nodeValue.length);return}if(n.nodeName=="BR"){r?s.setStartBefore(n):s.setEndBefore(n);return}}while(n=r?u.next():u.prev())}var s,v=r.selection,h,c,n,l;if(e){if(f&&(r.getBody().style.webkitUserSelect=""),h=u.select("td.mce-item-selected,th.mce-item-selected"),h.length>0){s=u.createRng();n=h[0];s.setStartBefore(n);s.setEndAfter(n);a(n,1);c=new t(n,u.getParent(h[0],"table"));do if(n.nodeName=="TD"||n.nodeName=="TH"){if(!u.hasClass(n,"mce-item-selected"))break;l=n}while(n=c.next());a(l);v.setRng(s)}r.nodeChanged();e=f=o=null}});r.on("KeyUp Drop SetContent",function(n){c(n.type=="setcontent");e=f=o=null;s=!1});r.on("ObjectResizeStart ObjectResized",function(n){s=n.type!="objectresized"});return{clear:c}}});i("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(n,t){var i=n.each;return function(r){function a(){var n=r.settings.color_picker_callback;if(n)return function(){var t=this;n.call(r,function(n){t.value(n).fire("change")},t.value())}}function s(n){return{title:"Advanced",type:"form",defaults:{onchange:function(){o(n,this.parents().reverse()[0],this.name()=="style")}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:a()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:a()}]}]}}function f(n){return n?n.replace(/px$/,""):""}function e(n){return/^[0-9]+$/.test(n)&&(n+="px"),n}function h(n){i("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},n)})}function v(n){i("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},n)})}function c(t,i,r){function u(t,r){return r=r||[],n.each(t,function(n){var t={text:n.text||n.title};n.menu?t.menu=u(n.menu):(t.value=n.value,i&&i(t));r.push(t)}),r}return u(t,r||[])}function o(n,t,i){var u=t.toJSON(),r=n.parseStyle(u.style);i?(t.find("#borderColor").value(r["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(r["background-color"]||"")[0].fire("change")):(r["border-color"]=u.borderColor,r["background-color"]=u.backgroundColor);t.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(r))))}function l(n,t,i){var r=n.parseStyle(n.getAttrib(i,"style"));r["border-color"]&&(t.borderColor=r["border-color"]);r["background-color"]&&(t.backgroundColor=r["background-color"]);t.style=n.serializeStyle(r)}var u=this;u.tableProps=function(){u.table(!0)};u.table=function(u){function d(){var i;o(y,this);v=n.extend(v,this.toJSON());n.each("backgroundColor borderColor".split(" "),function(n){delete v[n]});v["class"]===!1&&delete v["class"];r.undoManager.transact(function(){a||(a=r.plugins.table.insertTable(v.cols||1,v.rows||1));r.dom.setAttribs(a,{cellspacing:v.cellspacing,cellpadding:v.cellpadding,border:v.border,style:v.style,"class":v["class"]});y.getAttrib(a,"width")?y.setAttrib(a,"width",f(v.width)):y.setStyle(a,"width",e(v.width));y.setStyle(a,"height",e(v.height));i=y.select("caption",a)[0];i&&!v.caption&&y.remove(i);!i&&v.caption&&(i=y.create("caption"),i.innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',a.insertBefore(i,a.firstChild));h(a);v.align&&r.formatter.apply("align"+v.align,{},a);r.focus();r.addVisual()})}var y=r.dom,a,w,b,k,v={},p;u===!0?(a=y.getParent(r.selection.getStart(),"table"),a&&(v={width:f(y.getStyle(a,"width")||y.getAttrib(a,"width")),height:f(y.getStyle(a,"height")||y.getAttrib(a,"height")),cellspacing:a?y.getAttrib(a,"cellspacing"):"",cellpadding:a?y.getAttrib(a,"cellpadding"):"",border:a?y.getAttrib(a,"border"):"",caption:!!y.select("caption",a)[0],"class":y.getAttrib(a,"class")},i("left center right".split(" "),function(n){r.formatter.matchNode(a,"align"+n)&&(v.align=n)}))):(w={label:"Cols",name:"cols"},b={label:"Rows",name:"rows"});r.settings.table_class_list&&(v["class"]&&(v["class"]=v["class"].replace(/\s*mce\-item\-table\s*/g,"")),k={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[n.value]})})})});p={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[w,b,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},k]};r.settings.table_advtab!==!1?(l(y,v,a),r.windowManager.open({title:"Table properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:p},s(y)],onsubmit:d})):r.windowManager.open({title:"Table properties",data:v,body:p,onsubmit:d})};u.merge=function(n,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var i=this.toJSON();r.undoManager.transact(function(){n.merge(t,i.cols,i.rows)})}})};u.cell=function(){function b(){o(a,this);t=n.extend(t,this.toJSON());r.undoManager.transact(function(){i(y,function(n){r.dom.setAttribs(n,{scope:t.scope,style:t.style,"class":t["class"]});r.dom.setStyles(n,{width:e(t.width),height:e(t.height)});t.type&&n.nodeName.toLowerCase()!=t.type&&(n=a.rename(n,t.type));h(n);t.align&&r.formatter.apply("align"+t.align,{},n);v(n);t.valign&&r.formatter.apply("valign"+t.valign,{},n)});r.focus()})}var a=r.dom,u,t,w,y=[],p;(y=r.dom.select("td.mce-item-selected,th.mce-item-selected"),u=r.dom.getParent(r.selection.getStart(),"td,th"),!y.length&&u&&y.push(u),u=u||y[0],u)&&(t={width:f(a.getStyle(u,"width")||a.getAttrib(u,"width")),height:f(a.getStyle(u,"height")||a.getAttrib(u,"height")),scope:a.getAttrib(u,"scope"),"class":a.getAttrib(u,"class")},t.type=u.nodeName.toLowerCase(),i("left center right".split(" "),function(n){r.formatter.matchNode(u,"align"+n)&&(t.align=n)}),i("top middle bottom".split(" "),function(n){r.formatter.matchNode(u,"valign"+n)&&(t.valign=n)}),r.settings.table_cell_class_list&&(w={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_cell_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[n.value]})})})}),p={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},w]},r.settings.table_cell_advtab!==!1?(l(a,t,u),r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:t,body:[{title:"General",type:"form",items:p},s(a)],onsubmit:b})):r.windowManager.open({title:"Cell properties",data:t,body:p,onsubmit:b}))};u.row=function(){function k(){var f,c,s;o(u,this);t=n.extend(t,this.toJSON());r.undoManager.transact(function(){var n=t.type;i(v,function(i){r.dom.setAttribs(i,{scope:t.scope,style:t.style,"class":t["class"]});r.dom.setStyles(i,{height:e(t.height)});n!=i.parentNode.nodeName.toLowerCase()&&(f=u.getParent(i,"table"),c=i.parentNode,s=u.select(n,f)[0],s||(s=u.create(n),f.firstChild?f.insertBefore(s,f.firstChild):f.appendChild(s)),s.appendChild(i),c.hasChildNodes()||u.remove(c));h(i);t.align&&r.formatter.apply("align"+t.align,{},i)});r.focus()})}var u=r.dom,p,w,a,b,t,v=[],y;(p=r.dom.getParent(r.selection.getStart(),"table"),w=r.dom.getParent(r.selection.getStart(),"td,th"),i(p.rows,function(n){i(n.cells,function(t){if(u.hasClass(t,"mce-item-selected")||t==w)return v.push(n),!1})}),a=v[0],a)&&(t={height:f(u.getStyle(a,"height")||u.getAttrib(a,"height")),scope:u.getAttrib(a,"scope"),"class":u.getAttrib(a,"class")},t.type=a.parentNode.nodeName.toLowerCase(),i("left center right".split(" "),function(n){r.formatter.matchNode(a,"align"+n)&&(t.align=n)}),r.settings.table_row_class_list&&(b={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_row_class_list,function(n){n.value&&(n.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[n.value]})})})}),y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},b]},r.settings.table_row_advtab!==!1?(l(u,t,a),r.windowManager.open({title:"Row properties",data:t,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},s(u)],onsubmit:k})):r.windowManager.open({title:"Row properties",data:t,body:y,onsubmit:k}))}}});i("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(n,t,i,r,u,f,e,o){function h(u){function f(n){return function(){u.execCommand(n)}}function v(n,t){for(var o,r,i='<table id="__mce"><tbody>',f=0;f<t;f++){for(i+="<tr>",o=0;o<n;o++)i+="<td>"+(e.ie?" ":"<br>")+"<\/td>";i+="<\/tr>"}return i+="<\/tbody><\/table>",u.undoManager.transact(function(){u.insertContent(i);r=u.dom.get("__mce");u.dom.setAttrib(r,"id",null);u.dom.setAttribs(r,u.settings.table_default_attributes||{});u.dom.setStyles(r,u.settings.table_default_styles||{})}),r}function y(n,t){function i(){n.disabled(!u.dom.getParent(u.selection.getStart(),t));u.selection.selectorChanged(t,function(t){n.disabled(!t)})}if(u.initialized)i();else u.on("init",i)}function p(){y(this,"table")}function o(){y(this,"td,th")}function b(){for(var n="",i,n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;t<10;t++){for(n+="<tr>",i=0;i<10;i++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(t*10+i)+'" href="#" data-mce-x="'+i+'" data-mce-y="'+t+'"><\/a><\/td>';n+="<\/tr>"}return n+="<\/table>",n+'<div class="mce-text-center" role="presentation">1 x 1<\/div>'}function w(n,t,i){var s=i.getEl().getElementsByTagName("table")[0],r,f,h,e,o,c=i.isRtl()||i.parent().rel=="tl-tr";for(s.nextSibling.innerHTML=n+1+" x "+(t+1),c&&(n=9-n),f=0;f<10;f++)for(r=0;r<10;r++)e=s.rows[f].childNodes[r].firstChild,o=(c?r>=n:r<=n)&&f<=t,u.dom.toggleClass(e,"mce-active",o),o&&(h=e);return h.parentNode}var c,l=this,h=new r(u),a;if(u.settings.table_grid===!1?u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:h.table}):u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(n){n.aria&&(this.parent().hideAll(),n.stopImmediatePropagation(),h.table())},onshow:function(){w(0,0,this.menu.items()[0])},onhide:function(){var n=this.menu.items()[0].getEl().getElementsByTagName("a");u.dom.removeClass(n,"mce-active");u.dom.addClass(n[0],"mce-active")},menu:[{type:"container",html:b(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(n){var r=n.target,t,i;r.tagName.toUpperCase()=="A"&&(t=parseInt(r.getAttribute("data-mce-x"),10),i=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||this.parent().rel=="tl-tr")&&(t=9-t),(t!==this.lastX||i!==this.lastY)&&(w(t,i,n.control),this.lastX=t,this.lastY=i))},onclick:function(n){var t=this;n.target.tagName.toUpperCase()=="A"&&(n.preventDefault(),n.stopPropagation(),t.parent().cancel(),u.undoManager.transact(function(){v(t.lastX+1,t.lastY+1)}),u.addVisual())}}]}),u.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:p,onclick:h.tableProps}),u.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:p,cmd:"mceTableDelete"}),u.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:f("mceTableCellProps"),onPostRender:o},{text:"Merge cells",onclick:f("mceTableMergeCells"),onPostRender:o},{text:"Split cell",onclick:f("mceTableSplitCells"),onPostRender:o}]}),u.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:f("mceTableInsertRowBefore"),onPostRender:o},{text:"Insert row after",onclick:f("mceTableInsertRowAfter"),onPostRender:o},{text:"Delete row",onclick:f("mceTableDeleteRow"),onPostRender:o},{text:"Row properties",onclick:f("mceTableRowProps"),onPostRender:o},{text:"-"},{text:"Cut row",onclick:f("mceTableCutRow"),onPostRender:o},{text:"Copy row",onclick:f("mceTableCopyRow"),onPostRender:o},{text:"Paste row before",onclick:f("mceTablePasteRowBefore"),onPostRender:o},{text:"Paste row after",onclick:f("mceTablePasteRowAfter"),onPostRender:o}]}),u.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:f("mceTableInsertColBefore"),onPostRender:o},{text:"Insert column after",onclick:f("mceTableInsertColAfter"),onPostRender:o},{text:"Delete column",onclick:f("mceTableDeleteCol"),onPostRender:o}]}),a=[],s("inserttable tableprops deletetable | cell row column".split(" "),function(n){n=="|"?a.push({text:"-"}):a.push(u.menuItems[n])}),u.addButton("table",{type:"menubutton",title:"Table",menu:a}),!e.isIE)u.on("click",function(n){n=n.target;n.nodeName==="TABLE"&&(u.selection.select(n),u.nodeChanged())});l.quirks=new t(u);u.on("Init",function(){l.cellSelection=new i(u)});if(s({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(n){var t;t=u.dom.getParent(u.selection.getStart(),"th,td");u.dom.select("td.mce-item-selected,th.mce-item-selected").length?n.merge():h.merge(n,t)},mceTableInsertRowBefore:function(n){n.insertRow(!0)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(!0)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){c=n.cutRows()},mceTableCopyRow:function(n){c=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(c,!0)},mceTablePasteRowAfter:function(n){n.pasteRows(c)},mceTableDelete:function(n){n.deleteTable()}},function(t,i){u.addCommand(i,function(){var i=new n(u);i&&(t(i),u.execCommand("mceRepaint"),l.cellSelection.clear())})}),s({mceInsertTable:h.table,mceTableProps:function(){h.table(!0)},mceTableRowProps:h.row,mceTableCellProps:h.cell},function(n,t){u.addCommand(t,function(t,i){n(i)})}),u.settings.table_tab_navigation!==!1)u.on("keydown",function(t){var r,i,f;t.keyCode==9&&(r=u.dom.getParent(u.selection.getStart(),"th,td"),r&&(t.preventDefault(),i=new n(u),f=t.shiftKey?-1:1,u.undoManager.transact(function(){!i.moveRelIdx(r,f)&&f>0&&(i.insertRow(),i.refresh(),i.moveRelIdx(r,f))})))});l.insertTable=v}var s=u.each;o.add("table",h)})})(this);
/*
//# sourceMappingURL=plugin.min.js.map
*/